@page
@model Connect4_Server.Pages.NewGameModel
@{
    ViewData["Title"] = "New Game";
}

@* New Game page
   - Requires a logged-in user (session).
   - Shows the current player (name + external PlayerId 1..1000).
   - Posts to OnPostStartGameAsync (handler = "StartGame") which calls API /api/GameApi/start. *@

<h2>Start New Game</h2>

@if (!string.IsNullOrWhiteSpace(Model.StatusMessage))
{
    <div class="alert alert-warning">@Model.StatusMessage</div>
}

<div asp-validation-summary="All" class="text-danger"></div>

@if (Model.PlayerId > 0)
{
    <p><strong>Playing as:</strong> @Model.PlayerName (External PlayerId: @Model.PlayerId)</p>

    <form method="post" asp-page-handler="StartGame" asp-antiforgery="true">
        <input type="hidden" asp-for="PlayerId" />
        <button type="submit" class="btn btn-primary">Start Game</button>
    </form>
}

@if (Model.GameId > 0)
{
    <div class="alert alert-success mt-3">
        Game started! Game ID: <strong>@Model.GameId</strong>
    </div>
}
